<!doctype html><html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>Typing Python with typing - Yet another tech blog</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="Typing Python with typing">
<meta itemprop=description content="Learn how to add types to your Python code"><meta itemprop=datePublished content="2017-12-27T00:00:00-05:00">
<meta itemprop=dateModified content="2017-12-27T00:00:00-05:00">
<meta itemprop=wordCount content="625">
<meta itemprop=keywords content="python,"><meta property="og:title" content="Typing Python with typing">
<meta property="og:description" content="Learn how to add types to your Python code">
<meta property="og:type" content="article">
<meta property="og:url" content="https://trebaud.github.io/posts/typing-python/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-12-27T00:00:00-05:00">
<meta property="article:modified_time" content="2017-12-27T00:00:00-05:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Typing Python with typing">
<meta name=twitter:description content="Learn how to add types to your Python code">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700" rel=stylesheet type=text/css>
<link rel=stylesheet type=text/css media=screen href=https://trebaud.github.io/css/normalize.css>
<link rel=stylesheet type=text/css media=screen href=https://trebaud.github.io/css/main.css>
<link id=dark-scheme rel=stylesheet type=text/css href=https://trebaud.github.io/css/dark.css>
<script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<script src=https://trebaud.github.io/js/main.js></script>
</head>
<body>
<div class="container wrapper">
<div class=header>
<div class=avatar>
<a href=https://trebaud.github.io/>
<img src="https://avatars2.githubusercontent.com/u/8050949?s=400&v=4" alt="Yet another tech blog">
</a>
</div>
<h1 class=site-title><a href=https://trebaud.github.io/>Yet another tech blog</a></h1>
<div class=site-description><p>A collection of loosely coupled ramblings about tech, coding and life.</p><nav class="nav social">
<ul class=flat><li><a href=https://github.com/trebaud title=Github><i data-feather=github></i></a></li><li><a href=https://www.linkedin.com/in/thomas-rebaud-8017a168/ title=Linkedin><i data-feather=linkedin></i></a></li><li><a href=# class=scheme-toggle id=scheme-toggle></a></li></ul>
</nav>
</div>
<nav class=nav>
<ul class=flat>
<li>
<a href=/>üè† Home</a>
</li>
<li>
<a href=/posts>üìù All posts</a>
</li>
<li>
<a href=/about>üë®‚Äçüíª About</a>
</li>
<li>
<a href=/tags>üîç Tags</a>
</li>
</ul>
</nav>
</div>
<div class=post>
<div class=post-header>
<div class=meta>
<div class=date>
<span class=day>27</span>
<span class=rest>Dec 2017</span>
</div>
</div>
<div class=matter>
<h1 class=title>Typing Python with typing</h1>
</div>
</div>
<div class=markdown>
<p>I&rsquo;ve always been a big fan of the Python programming language. It&rsquo;s great for prototyping, it has great libraries for data processing and machine learning and it&rsquo;s overall just a joy to read and write with. But I also like types and if you&rsquo;re at all familiar with the language then you know that variables are dynamically typed in Python and that type information is absent from the basic syntax.</p>
<p>Don&rsquo;t get me wrong I love Python&rsquo;s dynamically typed model, it&rsquo;s what gives the language its distinct flexibility and fast prototyping capabilities. But it&rsquo;s undeniable that for certain tasks and projects, types add great value. They give you type hinting and help in catching obvious and not so obvious bugs, some that may only manifest themselves under some specific corner cases.</p>
<h2 id=typing-as-your-new-best-friend>Typing as your new best friend</h2>
<p>Now since Python 3.6 you can use a module called typing to static type your variables if you want to. The neat thing about typing is that you can choose to include type information at specific points in your code where you feel there is a need to do it. The syntax to declare a variable type goes like this:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>variable_name: <span style=color:#007020>type</span>
</code></pre></div><p>In functions you can also declare the return type like this:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>function_name</span>(param: <span style=color:#007020>type</span>)<span style=color:#333>-&gt;</span> return_type:
</code></pre></div><p>Typing provides you with container types like <code>Dict</code>, <code>List</code>, <code>Set</code> or <code>Tuple</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#080;font-weight:700>from</span> <span style=color:#0e84b5;font-weight:700>typing</span> <span style=color:#080;font-weight:700>import</span> Dict, List, Tuple

primes: List[<span style=color:#007020>int</span>] <span style=color:#333>=</span> [<span style=color:#00d;font-weight:700>2</span>,<span style=color:#00d;font-weight:700>3</span>,<span style=color:#00d;font-weight:700>5</span>,<span style=color:#00d;font-weight:700>7</span>,<span style=color:#00d;font-weight:700>11</span>,<span style=color:#00d;font-weight:700>13</span>]

primes_dict: Dict[<span style=color:#007020>str</span>, <span style=color:#007020>int</span>] <span style=color:#333>=</span> {
    <span style=background-color:#fff0f0>&#34;two&#34;</span>: <span style=color:#00d;font-weight:700>2</span>,
    <span style=background-color:#fff0f0>&#34;three&#34;</span>: <span style=color:#00d;font-weight:700>3</span>,
    <span style=background-color:#fff0f0>&#34;five&#34;</span>: <span style=color:#00d;font-weight:700>5</span>,
    <span style=background-color:#fff0f0>&#34;seven&#34;</span>: <span style=color:#00d;font-weight:700>7</span>,
    <span style=background-color:#fff0f0>&#34;eleven&#34;</span>: <span style=color:#00d;font-weight:700>11</span>,
    <span style=background-color:#fff0f0>&#34;thirteen&#34;</span>: <span style=color:#00d;font-weight:700>13</span>
}

isPrime_tuple: Tuple[<span style=color:#007020>str</span>, <span style=color:#007020>int</span>, <span style=color:#007020>bool</span>] <span style=color:#333>=</span> (<span style=background-color:#fff0f0>&#34;one&#34;</span>, <span style=color:#00d;font-weight:700>1</span>, <span style=color:#080;font-weight:700>False</span>)
</code></pre></div><p>I personnaly like this kind of syntax even if it might make the most hardcore python purist silently scream in cringe and agony. I feel it makes my code more readable and predictable but that might only be my Java part of the brain talking.</p>
<p>You can even define your own types by composing primitive types.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#080;font-weight:700>from</span> <span style=color:#0e84b5;font-weight:700>typing</span> <span style=color:#080;font-weight:700>import</span> Tuple

Vector <span style=color:#333>=</span> Tuple[<span style=color:#007020>float</span>,<span style=color:#007020>float</span>,<span style=color:#007020>float</span>]

vector: Vector <span style=color:#333>=</span> (<span style=color:#60e;font-weight:700>1.0</span>,<span style=color:#60e;font-weight:700>1.0</span>,<span style=color:#60e;font-weight:700>1.0</span>)

Matrix <span style=color:#333>=</span> Tuple[Vector,Vector,Vector]
matrix: Matrix <span style=color:#333>=</span> (
    (<span style=color:#60e;font-weight:700>1.0</span>,<span style=color:#60e;font-weight:700>0.0</span>,<span style=color:#60e;font-weight:700>0.0</span>),
    (<span style=color:#60e;font-weight:700>0.0</span>,<span style=color:#60e;font-weight:700>1.0</span>,<span style=color:#60e;font-weight:700>0.0</span>),
    (<span style=color:#60e;font-weight:700>0.0</span>,<span style=color:#60e;font-weight:700>0.0</span>,<span style=color:#60e;font-weight:700>1.0</span>)
)
</code></pre></div><p>Or with classes.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#080;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>typing</span>

<span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Like</span>:
    <span style=color:#080;font-weight:700>def</span> __init__(self: Like)<span style=color:#333>-&gt;</span> <span style=color:#080;font-weight:700>None</span>:
        <span style=color:#080;font-weight:700>pass</span>

<span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Pie</span>(Like):
    <span style=color:#080;font-weight:700>def</span> __init__(self: Pie)<span style=color:#333>-&gt;</span> <span style=color:#080;font-weight:700>None</span>:
        <span style=color:#080;font-weight:700>pass</span>

I: Like <span style=color:#333>=</span> Pie()
</code></pre></div><p>If you want to declare a function that takes parameters of multiple types you can use <code>Any</code>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#080;font-weight:700>from</span> <span style=color:#0e84b5;font-weight:700>typing</span> <span style=color:#080;font-weight:700>import</span> Any

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>whatIsMyType</span>(param: Any):
    <span style=color:#080;font-weight:700>return</span> <span style=color:#007020>type</span>(param)

<span style=color:#007020>print</span>(whatIsMyType(<span style=color:#00d;font-weight:700>42</span>))

<span style=color:#007020>print</span>(whatIsMyType(<span style=background-color:#fff0f0>&#34;42&#34;</span>))
</code></pre></div><h2 id=using-mypy-as-your-new-tool-for-type-checking>Using mypy as your new tool for type checking</h2>
<p>To type check your newly written programs with typing your best choice is probably to use <a href=https://github.com/python/mypy>mypy</a>, a static type
checker you can run before calling the python interpreter.</p>
<p>A cool thing you can do with this is build a new execution pipeline combining the static type checker and the Python interpreter in a single program
executable. If there is a type error the program won&rsquo;t run the interpreter and will output the type error messages, otherwise it will execute the python script.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#888>#!/usr/bin/python3.6</span>

<span style=color:#080;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>subprocess</span>
<span style=color:#080;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>sys</span>

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>type_check</span>(script):
    output <span style=color:#333>=</span> subprocess<span style=color:#333>.</span>run([<span style=background-color:#fff0f0>&#39;mypy&#39;</span>, script], stdout<span style=color:#333>=</span>subprocess<span style=color:#333>.</span>PIPE)<span style=color:#333>.</span>stdout
    <span style=color:#080;font-weight:700>return</span> output<span style=color:#333>.</span>decode(<span style=background-color:#fff0f0>&#39;utf-8&#39;</span>)

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>run</span>(script):
    output <span style=color:#333>=</span> subprocess<span style=color:#333>.</span>run([<span style=background-color:#fff0f0>&#39;python3.6&#39;</span>, script])


<span style=color:#080;font-weight:700>if</span> __name__ <span style=color:#333>==</span> <span style=background-color:#fff0f0>&#39;__main__&#39;</span>:
    script <span style=color:#333>=</span> sys<span style=color:#333>.</span>argv[<span style=color:#00d;font-weight:700>1</span>]
    mypy_output <span style=color:#333>=</span> type_check(script)

    <span style=color:#080;font-weight:700>if</span> mypy_output <span style=color:#333>!=</span> <span style=background-color:#fff0f0>&#39;&#39;</span>:
        <span style=color:#007020>print</span>(mypy_output)
    <span style=color:#080;font-weight:700>else</span>:
        run(script)
</code></pre></div><p>Make this program executable and send in the python script you want to run as an argument.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>~$ chmod +x myPython
~$ ./myPython script.py
</code></pre></div><p>And voila you now have a brand new python interpreter which runs a type checker prior to running the actual program.</p>
<p>That&rsquo;s it! I hope you found this useful and might at least try it out of curiosity in some of your codebases. I think you&rsquo;ll find there&rsquo;s some merit to typing your variables in Python, even if it might slow you down in the short term, it might actually make you gain time in the longer run.</p>
<p>Bye for now!</p>
</div>
<div class=tags>
<ul class=flat>
<li><a href=/tags/python>python</a></li>
</ul>
</div></div>
</div>
<div class="footer wrapper">
<nav class=nav>
<div>2021 <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div>
</nav>
</div>
<script>feather.replace()</script>
</body>
</html>